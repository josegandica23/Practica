monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
}
names(final)=c("id","nobs")
final
}
gg("specdata",11:14)
labels(arc)
labels(final)
labels(final)[1]
labels(final)[2]
labels(final)[2]=c("id",)
labels(final)[2]=c("id","nobs")
labels(final)[2]
labels(final)[[2]]
labels(final)[[2]] <- c("id","nobs")
labels(final)[2] <- list("id","nobs")
levels(final)
factor(final)
gg <- function(directory, id = 1:332) {
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
}
final <- matrix(final,,2)
names(final)=c("id","nobs")
final
}
gg("specdata",11:14)
gg <- function(directory, id = 1:332) {
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
}
final <- matrix(final,,2)
names(final)
final
}
gg("specdata",11:14)
final <- gg("specdata",11:14)
final
names(final)
labels(final)
factor(final)
factor(final)[1]
names(final)=matrix(c("id","nobs"),,2)
final
View(final)
factor(final=numeric(),labels=levels)
labels(x)
labels(final)
labels(final)=levels(final)
labels(final)==levels(final)
levels(final)
final
factor(final)
levels(final)
gg <- function(directory, id = 1:332) {
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
}
final
}
gg("specdata",11:14)
gg("specdata",11:20)
max(gg("specdata",))
View(final)
gg("specdata", c(2, 4, 8, 10, 12))
pollutantmean <- function(directory, pollutant, id = 1:332) {
## 'directory' is a character vector of length 1 indicating
## the location of the CSV files
## 'pollutant' is a character vector of length 1 indicating
## the name of  the pollutant for which we will calcultate the
## mean; either "sulfate" or "nitrate"
## 'id' is an integer vector indicating the monitor ID numbers
## to be used
## Return the mean of the pollutant across all monitors list
## in the 'id' vector (ignoring NA values)
## NOTE: Do not round the result
means <- c()
for(monitor in id){
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- monitor_data[pollutant]
means <- c(means, interested_data[!is.na(interested_data)])
}
mean(means)
}
pollutantmean("specdata","nitrate",332)
Complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
}
final
}
final=complete("specdata",14)
Complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
}
final
}
final=complete("specdata",14)
Complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
}
final
}
final=complete("specdata",14)
final=Complete("specdata",14)
final
data.frame(final)
final
final=data.fram(final)
final=data.frame(final)
final
names(final)
Complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
complete("specdata", c(2, 4, 8, 10, 12))
Complete("specdata", c(2, 4, 8, 10, 12))
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
Complete("specdata", c(2, 4, 8, 10, 12))
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- c()
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
complete("specdata",2:6)
complete("specdata",2:56)
pollutantmean <- function(directory, pollutant, id = 1:332) {
## 'directory' is a character vector of length 1 indicating
## the location of the CSV files
## 'pollutant' is a character vector of length 1 indicating
## the name of  the pollutant for which we will calcultate the
## mean; either "sulfate" or "nitrate"
## 'id' is an integer vector indicating the monitor ID numbers
## to be used
## Return the mean of the pollutant across all monitors list
## in the 'id' vector (ignoring NA values)
## NOTE: Do not round the result
means <- c()
for(monitor in id){
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- monitor_data[pollutant]
means <- c(means, interested_data[!is.na(interested_data)])
}
mean(means)
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean("specdata", "sulfate", 34)
pollutantmean("specdata", "nitrate")
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- complete("specdata", 54)
print(cc$nobs)
RNGversion("3.5.1")
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
rm(list=ls())
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
corr <- function(directory, threshold = 0){
## 'directory' is a character vector of length 1 indicating
## the location of the CSV files
## 'threshold' is a numeric vector of length 1 indicating the
## number of completely observed observations (on all
## variables) requi?red to compute the correlation between
## nitrate and sulfate; the default is 0
## Return a numeric vector of correlations
## NOTE: Do not round the result!
cor_results <- numeric(0)
complete_cases <- complete(directory)
complete_cases <- complete_cases[complete_cases$nobs>=threshold, ]
#print(complete_cases["id"])
#print(unlist(complete_cases["id"]))
#print(complete_cases$id)
if(nrow(complete_cases)>0){
for(monitor in complete_cases$id){
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
#print(path)
monitor_data <- read.csv(path)
#print(monitor_data)
interested_data <- monitor_data[(!is.na(monitor_data$sulfate)), ]
interested_data <- interested_data[(!is.na(interested_data$nitrate)), ]
sulfate_data <- interested_data["sulfate"]
nitrate_data <- interested_data["nitrate"]
cor_results <- c(cor_results, cor(sulfate_data, nitrate_data))
}
}
cor_results
}
cr <- corr("specdata")
cr <- sort(cr)
RNGversion("3.5.1")
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
RNGversion("3.5.1")
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
complete(11:14)
complete("specdata")
complete <- function(directory, id = 1:332) {
#
#
ncolok <- c()
fd <- c()
final <- c()
i=0
id <- matrix(id,,1)
for(monitor in id){
i <- i+1
cod <- id[i,1]
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- c(monitor_data[,2]+monitor_data[,3])
ncolok <- c(interested_data[!is.na(interested_data)])
ncolok <- matrix(ncolok,,1)
fd <- dim(ncolok)[1]
final <- rbind(final,c(cod,fd))
final <- data.frame(final)
names(final)=c("id","nobs")
}
final
}
complete_cases <- complete(directory)
complete_cases <- complete_cases[complete_cases$nobs>=threshold, ]
complete_cases <- complete(directory)
complete_cases <- complete_cases[complete_cases$nobs>=threshold, ]
complete_cases <- complete(directory)
complete_cases <- complete("specdata")
complete_cases <- complete_cases[complete_cases$nobs>=threshold, ]
complete_cases <- complete_cases[complete_cases$nobs>=350, ]
complete_cases
